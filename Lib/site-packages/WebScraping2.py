from datetime import datetime
now = datetime.now()
tanggal = now.strftime("%d %B %Y %H:%M:%S")

# import webdriver dari selenium
from selenium import webdriver

# import urllib
import urllib.request

# import json
import json

i = 1

PATH = "C:\Program Files (x86)\chromedriver.exe"

chartlist = []
driver = webdriver.Chrome(PATH)
driver.get("https://www.melon.com/chart/")

for chart in driver.find_elements_by_class_name("lst50"):
	for image in chart.find_elements_by_tag_name("img"):
		# append terkini ke variabel data
		chartlist.append(
			{
				"rank": chart.find_element_by_class_name("wrap.t_center").text,
				"title": chart.find_element_by_class_name("ellipsis.rank01").text,
				"artist": chart.find_element_by_class_name("ellipsis.rank02").text,
				"album": chart.find_element_by_class_name("ellipsis.rank03").text,
				"waktu_scraping": now.strftime("%d %B %Y %H:%M:%S"),
				"image": image.get_attribute("src")
			}
		)
		i = i+1

for chart in driver.find_elements_by_class_name("lst100"):
	for image in chart.find_elements_by_tag_name("img"):
		# append terkini ke variabel data
		chartlist.append(
			{
				"rank": chart.find_element_by_class_name("wrap.t_center").text,
				"title": chart.find_element_by_class_name("ellipsis.rank01").text,
				"artist": chart.find_element_by_class_name("ellipsis.rank02").text,
				"album": chart.find_element_by_class_name("ellipsis.rank03").text,
				"waktu_scraping": now.strftime("%d %B %Y %H:%M:%S"),
				"image": image.get_attribute("src")
			}
		)
		i = i+1

# dump list dictionary menjadi json
hasil_scraping = open("hasilscraping.json", "w")
json.dump(chartlist, hasil_scraping, indent = 6)
hasil_scraping.close()
driver.quit()